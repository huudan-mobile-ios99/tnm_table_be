"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const ScreenPortAddrInfo_1 = require("@novastar/native/ScreenPortAddrInfo");
const common_1 = require("@novastar/native/common");
const sumBy_1 = __importDefault(require("lodash/sumBy"));
const GetScreenPortAddrInfo_1 = __importDefault(require("./GetScreenPortAddrInfo"));
const common_2 = require("./common");
const groupBySender = (0, common_2.groupByProps)('SenderIndex');
const notEmptySender = (0, common_2.hasProps)('SenderIndex');
function GetScreenSenderAddrInfo(scr) {
    const ports = (0, GetScreenPortAddrInfo_1.default)(scr).filter(notEmptySender);
    return groupBySender(ports).map(([index, items]) => (0, common_1.makeStruct)(ScreenPortAddrInfo_1.ScreenPortAddrInfo, {
        ...index,
        LoadScannerCount: (0, sumBy_1.default)(items, 'LoadScannerCount'),
    }));
}
exports.default = GetScreenSenderAddrInfo;
//# sourceMappingURL=GetScreenSenderAddrInfo.js.map